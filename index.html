<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Incremenstrual game: An educational incremental game</title>
</head>
  <body>

  <div id="container" style="">
  <div id="hormones">
    
    
  <h2 style="text-align:center">
  Hormones
  </h2>
   
    
   <div id="gnrhdiv" style="border-style:solid;width:200px;margin-left:320px;background-color:#FFDCFC;">
  <h4 style="border-bottom:solid;padding-bottom:2px;margin-top:0px;margin-bottom:0px;text-align:center;background-color:white;">
  Hypothalamus
  </h4>
  <h4 style="margin-top:0px;padding-top:10px;text-align:center;">
  GnRH
  </h4>
    <p id="gnrh" style="text-align:center;padding-bottom:10px;">
    </p>
    </div>
    
    <br>
    <br>
    <br>
    
    
     <div id="antpitdiv" style="border-style:solid;width:403px;margin-left:220px;">
      <h4 style="border-bottom:solid;padding-bottom:2px;margin-top:0px;margin-bottom:0px;text-align:center;">
  Anterior pituitary
  </h4>
  
   <div id="fshdiv" style="background-color:#C9FFBF;width:200px;float:right;">
     <h4 style="margin-top:10px;text-align:center;">
  FSH
  </h4>
   <p id="fsh" style="text-align:center;padding-bottom:10px;">
   Unlocks at 4e+4 GnRH units
    </p>
    </div>
    
  <div id="lhdiv" style="background-color:mistyrose;width:200px;border-right:solid;height:100%;">
  <h4 style="margin-top:0px;text-align:center;padding-top:10px;">
  LH
  </h4>
   <p id="lh" style="text-align:center;padding-bottom:10px;">
   Unlocks at 4e+4 GnRH units
    </p>
    </div>
    </div>
    
    <br>
    <br>
    <br>
    
    <div style="width:800px">
     <div id="glomerulosadiv" style="border-style:solid;width:200px;float:right;">
     <h4 id="glomerulosatext" style="border-bottom:solid;padding-bottom:2px;margin-top:0px;margin-bottom:0px;text-align:center;">
  Granulosa cells
  </h4>
  
  <div id="estrogendiv" style="background-color:#EABFFF;width:200px;border-bottom:solid;">
     <h4 style="margin-top:0px;text-align:center;padding-top:10px;">
  Estrogen
  </h4>
   <p id="estrogen" style="text-align:center;padding-bottom:10px;">
   Produced by granulosa cells
    </p>
    </div>
    
    <div id="inhibindiv" style="background-color:#FFDDBF;width:200px;border-bottom:solid;">
     <h4 style="margin-top:0px;text-align:center;padding-top:10px;">
  Inhibin
  </h4>
   <p id="inhibin" style="text-align:center;padding-bottom:10px;">
   Produced by granulosa cells
    </p>
    </div>
    
    <div id="progesteronediv" style="background-color:#BFFFFE;width:200px;height:100%;">
     <h4 style="margin-top:0px;text-align:center;padding-top:10px;">
  Progesterone
  </h4>
   <p id="progesterone" style="text-align:center;padding-bottom:10px;">
   Produced by granulosa cells<br>Unlocks at 1.00e+10 LH units
    </p>
    </div>
    </div>
    
    <div id="thecaldiv" style="border-style:solid;width:200px;margin-left:50px;background-color:#FEFFBF;">
     <h4 id="thecaltext" style="border-bottom:solid;padding-bottom:2px;margin-top:0px;margin-bottom:0px;text-align:center;background-color:white;">
  Thecal cells
  </h4>
    <h4 style="text-align:center;padding-top:10px;margin-top:0px;">
    Androgens <br> <i>(To be converted to estrogen)</i>
  </h4>
   <p id="androgen" style="text-align:center;padding-bottom:10px;">
   Produced by thecal cells
    </p>
    </div>
    </div>
    
    
    </div>
    
    
    
    <div id="upgrades">
 <h2>
 Upgrades
 </h2>
      <div style="display: table-row">
      <div id="upgrade1" style="width: 200px; display: table-cell; padding-right: 5px">
 <h4>
 Double the speed of GnRH production
 </h4>
  <p id="up1cost">
  Cost: 400 GnRH units
    </p>
   <button id="butup1" onclick="buyup1()">Buy</button>
      </div>
        
      <div id="upgrade2" style="width: 200px; display: table-cell">
   <h4>
 Triple the speed of GnRH production
 </h4>
  <p id="up2cost">
  Cost: 1.00e+5 GnRH units
    </p>
   <button id="butup2" onclick="buyup2()">Buy</button>
      </div>
      </div>
        
      <div style="display: table-row">
        <div id="upgrade3" style="width: 200px; display: table-cell; padding-right: 5px">
   <h4>
 Antral follicle formation <br> <i>Thecal cells respond to LH, granulosa cells respond to FSH</i>
 </h4>
  <p id="up3cost">
  Cost: 2.00e+6 LH units and 2.00e+6 FSH units
    </p>
   <button id="butup3" onclick="buyup3()">Buy</button>
      </div>
          
       <div id="upgrade4" style="width: 200px; display: table-cell">    
    <h4>
      Unlock slider to control activation ratio of granulosa and thecal cells <br><br>
 </h4>
  <p id="up4cost">
  Cost: 3.00e+6 estrogen units <br><br>
    </p>
   <button id="butup4" onclick="buyup4()">Buy</button>
      </div>
      </div> 
        
        <div style="display: table-row">
         <div id="upgrade4half" style="width: 200px; display: table-cell; padding-right: 5px">
   <h4>
     Buying upgrades no longer spends resources <br><br><br>
 </h4>
  <p id="up4halfcost">
  Cost: 1.00e+6 estrogen units
    </p>
   <button id="butup4half" onclick="buyup4half()">Buy</button>
      </div>
           
            <div id="upgrade5" style="width: 200px; display: table-cell">
   <h4>
 Thecal layer becomes hyperaemic <br> <i>Quadruple the speed of androgen production</i>
 </h4>
  <p id="up5cost">
  Cost: 5.00e+6 LH units
    </p>
   <button id="butup5" onclick="buyup5()">Buy</button>
      </div>
      </div>    
          
          <div style="display: table-row">
            <div id="upgrade5half" style="width: 200px; display: table-cell; padding-right: 5px">  
    <h4>
 Estrogen uses a better formula to stimulate its own production
 </h4>
  <p id="up5halfcost">
  Cost: 1.00e+7 estrogen units
    </p>
   <button id="butup5half" onclick="buyup5half()">Buy</button>
      </div>
              
             <div id="upgrade6" style="width: 200px; display: table-cell">  
    <h4>
 Estrogen exerts positive feedback effects on GnRH, LH and FSH instead
 </h4>
  <p id="up6cost">
  Cost: 2.00e+8 estrogen units
    </p>
   <button id="butup6" onclick="buyup6()">Buy</button>
      </div>
      </div>   
            
            <div style="display: table-row">
            <div id="upgrade7" style="width: 200px; display: table-cell; padding-right: 5px">   
    <h4>
      Induce ovulation <br><i>Progesterone is produced much faster</i><br><br>
 </h4>
  <p id="up7cost">
  Cost: 1.00e+13 LH units <i>(LH surge required)</i>
    </p>
   <button id="butup7" onclick="buyup7()">Buy</button>
      </div>
              
             <div id="upgrade8" style="width: 200px; display: table-cell">  
    <h4>
    Corpus luteum matures<br><i>Boost progesterone, androgen and estrogen production</i>
 </h4>
  <p id="up8cost">
  Cost: 3.00e+6 progesterone units
    </p>
   <button id="butup8" onclick="buyup8()">Buy</button>
      </div>
      </div> 
              
            <div style="display: table-row">  
            <div id="upgrade9" style="width: 200px; display: table-cell">   
    <h4>
 Undergo menstruation<br><i>Complete menstrual cycle<br>This will reset your progress, but you will gain 1 cycle point</i>
 </h4>
  <p id="up9cost">
  Requirement: &#60;1000 progesterone units
    </p>
   <button id="butup9" onclick="buyup9()">Buy</button>
      </div>
      </div>
    </div>
      
    
    
      <canvas id="chart" style="width:100%;max-width:500px;max-height:300px;"></canvas>
     <div id="slidecontainer" style="">
       <p id="sliderno" style="font-style:italic">
         70% thecal cells, 30% granulosa cells
  </p>
  <input type="range" min="0" max="100" value="30" class="slider" id="slider">
</div> 
     <img id="downfirst" src="down.png" style="height:50px;width:30px;position:absolute;top:199px;left:420px;">
       <img id="leftdown" src="leftdown.png" style="height:50px;width:50px;position:absolute;top:374px;left:220px;">
        <img id="rightdown" src="rightdown.png" style="height:50px;width:50px;position:absolute;top:374px;left:600px;">
         <img id="black" src="black.png" style="height:40px;width:330px;position:absolute;top:454px;left:270px;">
          <img id="estitself" src="itself.png" style="height:40px;width:60px;position:absolute;top:484px;left:540px;">
          <img id="inhibinest" src="itself.png" style="height:50px;width:70px;position:absolute;top:521px;left:530px;">
           <img id="upleft" src="upleft.png" style="height:80px;width:330px;position:absolute;top:519px;left:270px;">
            <img id="bigest" src="bigred.png" style="height:400px;width:310px;position:absolute;top:124px;left:540px;">
              <img id="inhibinfsh" src="inhibin.png" style="height:300px;width:280px;position:absolute;top:299px;left:640px;">
               <img id="progarrow" src="prog.png" style="height:550px;width:380px;position:absolute;top:159px;left:550px;">
      
   </div>
   <div style="clear: both;">
   </div>
     
     <br>
 <div id="cycles">
   <h2>
  Cycles 
  </h2>
  
   <div style="display: table-row">
   <div style="display:table-cell;width:200px;border-style:solid;">
  <h4 style="text-align:center">
  Cycles completed:
  </h4>
    <p id="cyclesno" style="text-align:center">
    0
    </p>
    </div>
    
    <div style="display:table-cell;width:200px;border-style:solid;">
    <h4 style="text-align:center">
  Cycle points left:
  </h4>
    <p id="cyclepoints" style="text-align:center">
    0
    </p>
    </div>
    </div>
    
     <div style="display: table-row">
    <div id="c1div">
    <h4>
 Triple the speed of GnRH production
 </h4>
  <p id="c1cost">
  Cost: 1 cycle point
    </p>
   <button id="butc1" onclick="buyc1()">Buy</button>
   </div>
   
    <div id="c2div">
<h4>
 Autobuy upgrades (excludes cycle upgrades)
 </h4>
  <p id="c2cost">
  Cost: 2 cycle points
    </p>
   <button id="butc2" onclick="buyc2()">Buy</button>
   </div>
   </div>
   
    <div style="display: table-row">
    <div id="c3div">
   <h4>
 Estrogen exerts less negative feedback on GnRH, LH and FSH
 </h4>
  <p id="c3cost">
  Cost: 1 cycle point
    </p>
   <button id="butc3" onclick="buyc3()">Buy</button>
   </div>
   
    <div id="c4div">
   <h4>
   Progesterone falls much faster after luteolysis
 </h4>
  <p id="c4cost">
  Cost: 1 cycle point
    </p>
   <button id="butc4" onclick="buyc4()">Buy</button>
   </div>
   </div>
   
    <div style="display: table-row">
    <div id="c5div">
    <h4>
   "Corpus luteum matures" upgrade cost is divided by 5
 </h4>
  <p id="c5cost">
  Cost: 1 cycle point
    </p>
   <button id="butc5" onclick="buyc5()">Buy</button>
   </div>
   </div>
    </div>
    
    <div id="realgraph">
      <h4>
        How the graph would look ideally...
      </h4>
       <img id="realgraphimg" src="changes-woman-cycle.png" style="height:500px;width:456px">
      <p>
        Image taken from Encyclopedia Britannica
      </p>
    </div>
 
     <div id="alertbox" style="position:fixed;bottom:0;right:0;">
    Welcome to the incremenstrual game! <br> Your goal is to buy all the upgrades to complete the menstrual cycle.
    <button id="exitpopupbut" onclick="exitpopup()">x</button>
    </div>
     
    <script
src="https://cdn.jsdelivr.net/npm/chart.js">
</script>
   <script>
   var time = 0
var gnrhlvl=0
var estlvl=0
var lhlvl=0
var lhlvl2=0
var fshlvl=0
var fshlvl0=0
var andlvl=0
var inhibinlvl=0
var proglvl=0
var up1=2
var up2=0
var up3=false
var spend=true
var up5=0
var up6=false
var up8=0
var up8x=0
var up1cost=400
var up2cost = 10**5
var up3cost = 2*10**6
var up4cost = 3*10**6
var up4halfcost=10**6
var up5cost = 5*10**6
var up5halfcost=10**7
var up7cost=10**13
var up8cost=3*10**6
var up9cost=1000
var lhunlock = false
var fshunlock = false
var progunlock=false
var estincrement=0
var andincrement=0
var estimprove = false
var ovulation = false
var lhlimit=false
var cycles=0
var cyclepoints=0
var c1cost=1
var c1=0
var autobuy=false
var c3=false
var c4=0
var c5=0

//initial slider condition
document.getElementById("slidecontainer").style.visibility= "hidden";
 document.getElementById("downfirst").style.visibility= "hidden";
     document.getElementById("leftdown").style.visibility= "hidden";
document.getElementById("rightdown").style.visibility= "hidden";
     document.getElementById("black").style.visibility= "hidden";
     document.getElementById("estitself").style.visibility= "hidden";
     document.getElementById("inhibinest").style.visibility= "hidden";
     document.getElementById("upleft").style.visibility= "hidden";
     document.getElementById("bigest").style.visibility= "hidden";
     document.getElementById("inhibinfsh").style.visibility= "hidden";
     document.getElementById("progarrow").style.visibility= "hidden";
   document.getElementById("realgraph").style.visibility= "hidden";
     setTimeout(alertboxfade,7000)
     

  setInterval(addtime,10);
  function addtime() {
  //time+=1;
  addgnrh();
  if (up3 == true) {
  addest();
  }
  if (lhunlock==true) {
  addlh();
  }
  if (fshunlock==true) {
  addfsh();
  }
  if (up3==true) {
  addandrogen(); 
  }
  if (up3==true) {
  addinhibin();
  }
  if (progunlock==true) {
  addprogesterone();
  }
  checkbuybuttons();
  checkunlocks();
  if (autobuy==true) {
  autobuyupgrades();
  }
  if (up8x>0) {
  up8timer();
  }
  }
  
  function addgnrh() {
  if (up6==false || ovulation==true) {
  if (c3==true) {
   gnrhlvl=gnrhlvl+Math.floor((2**up1)*(3**up2)/[Math.log10(Math.cbrt(estlvl)+10)*(proglvl+1)]);
  } else {
  gnrhlvl=gnrhlvl+Math.floor((2**up1)*(3**up2)/[Math.log10(estlvl+10)*(proglvl+1)]);
  }} else {
  gnrhlvl=gnrhlvl+Math.floor((2**up1)*(3**up2)*Math.log10(estlvl+10));
  }
  if (ovulation==true) {
  gnrhlvl-=gnrhlvl/100
  }
  if (gnrhlvl>10000) {
  document.getElementById("gnrh").innerHTML=gnrhlvl.toExponential(2) + " units"
} else {
  document.getElementById("gnrh").innerHTML=gnrhlvl + " units"
  }
  }
  
  function addest() {
  if (andlvl<=0) {
  estlvl+= Math.floor((5**up8)*(4**up5)*[Math.sqrt(lhlvl)*Math.cbrt(Math.log10(inhibinlvl+10))]*(100-slider.value)/100)
  } else {
  if (lhlimit==true) {
  estlvl+=10;
  } else {
  estlvl=estlvl+Math.floor(estincrement)
  }}
  if (estimprove==false) {
  estincrement = (5*10**up8)*[Math.sqrt(fshlvl)*Math.cbrt(Math.log10(estlvl+10))*Math.cbrt(Math.log10(inhibinlvl+10))]*slider.value/100
  } else {
  estincrement = (5*10**up8)*[Math.sqrt(fshlvl)*(Math.log10(estlvl+10)**2)*Math.cbrt(Math.log10(inhibinlvl+10))]*slider.value/100
  }
   if (ovulation==true) {
  estlvl-=Math.floor(estlvl/50)
  }
   if (estlvl>10000) {
  document.getElementById("estrogen").innerHTML=estlvl.toExponential(2) + " units"
} else {
  document.getElementById("estrogen").innerHTML=estlvl + " units"
  }
  }
  
  function addandrogen() {
  andincrement = Math.floor((5**up8)*(4**up5)*[Math.sqrt(lhlvl)*Math.cbrt(Math.log10(inhibinlvl+10))]*(100-slider.value)/100 - estincrement)
  if (andincrement<0 && andlvl<=0) {
  andlvl=0;
  } else {
  if (lhlimit==true) {
  andlvl+=10;
  } else {
  if (ovulation==true) {
   andlvl=Math.floor(andlvl+andincrement/10);
  } else {
  andlvl=andlvl+andincrement;
  }}
  }
   if (ovulation==true) {
  andlvl-=Math.floor(andlvl/100)
  }
  if (andlvl>10000) {
  document.getElementById("androgen").innerHTML=andlvl.toExponential(2) + " units"
} else {
  document.getElementById("androgen").innerHTML=andlvl + " units"
  }
  }
  
   function addlh() {
  if (up6==false || ovulation==true) {
  if (c3==true) {
  lhlvl=lhlvl+Math.floor(Math.sqrt(gnrhlvl)/Math.log10(Math.cbrt(estlvl)+10));
  } else {
  lhlvl=lhlvl+Math.floor(Math.sqrt(gnrhlvl)/Math.log10(estlvl+10));
  }} else {
   lhlvl=lhlvl+Math.floor(Math.sqrt(gnrhlvl)*Math.log10(estlvl+10));
  }
  if (lhlimit==true) {
  lhlvl-=Math.floor(lhlvl/500)
  }
  if (ovulation==true) {
  if (lhlimit==true && lhlvl2<Math.floor(lhlvl/(50*proglvl+1))) {
  } else {
  lhlvl2=Math.floor(lhlvl/(50*proglvl+1));
  }} else {
  lhlvl2=lhlvl;
  }
   if (lhlvl2>10000) {
  document.getElementById("lh").innerHTML=lhlvl2.toExponential(2) + " units"
} else {
  document.getElementById("lh").innerHTML=lhlvl2 + " units"
  }
  }
  
   function addfsh() {
  if (up6==false || ovulation==true) {
  if (c3==true) {
   fshlvl0=fshlvl0+Math.floor(Math.sqrt(gnrhlvl)/Math.log10(Math.cbrt(estlvl)+10));
  } else {
  fshlvl0=fshlvl0+Math.floor(Math.sqrt(gnrhlvl)/Math.log10(estlvl+10));
  }} else {
  fshlvl0=fshlvl0+Math.floor(Math.sqrt(gnrhlvl)*Math.log10(estlvl+10));
  }
   if (lhlimit==true) {
  fshlvl0-=Math.floor(fshlvl0/500)
  }
  if (ovulation==true) {
  if (lhlimit==true && fshlvl<Math.floor(fshlvl0/((50*proglvl+1)*Math.log10(inhibinlvl+10)))) {
  } else {
  fshlvl=Math.floor(fshlvl0/((50*proglvl+1)*Math.log10(inhibinlvl+10)));
  }} else {
  fshlvl=Math.floor(fshlvl0*5**(-1*Math.log10(inhibinlvl/10+1)));
  }
   if (fshlvl>10000) {
  document.getElementById("fsh").innerHTML=fshlvl.toExponential(2) + " units"
} else {
  document.getElementById("fsh").innerHTML=fshlvl + " units"
  }
  }
  
   function addinhibin() {
  inhibinlvl=inhibinlvl+Math.floor(Math.cbrt(fshlvl)*slider.value/100)
  if (ovulation==true) {
  inhibinlvl-=Math.floor(inhibinlvl/500)
  }
   if (inhibinlvl>10000) {
  document.getElementById("inhibin").innerHTML=inhibinlvl.toExponential(2) + " units"
} else {
  document.getElementById("inhibin").innerHTML=inhibinlvl + " units"
  }
  }
  
   function addprogesterone() {
  if (ovulation==false) {
  proglvl+=Math.floor(Math.log10(fshlvl+10)*slider.value/100);
  } else {
  if (lhlimit==true) {
  proglvl+=(30**c4);
  proglvl-=Math.floor((30**c4)*proglvl/300)
  } else {
  proglvl+=2000*(5**up8x)
  }}
   if (proglvl>10000) {
  if (lhlimit==true) {
  document.getElementById("progesterone").innerHTML=proglvl.toExponential(2) + " units <br>" + "Warning: low LH levels causing luteolysis and reducing progesterone, androgen and estrogen production";
  } else {
  document.getElementById("progesterone").innerHTML=proglvl.toExponential(2) + " units"
  }
} else {
if (lhlimit==true) {
  document.getElementById("progesterone").innerHTML=proglvl + " units <br>" + "Warning: low LH levels causing luteolysis and reducing progesterone, androgen and estrogen production";
  } else {
  document.getElementById("progesterone").innerHTML=proglvl + " units"
  }}
  }
  
  
  //slider
var slider = document.getElementById("slider");
var output = document.getElementById("sliderno");

// Update the current slider value (each time you drag the slider handle)
slider.oninput = function() {
  output.innerHTML = (100-this.value)+"% thecal cells, "+slider.value+"% granulosa cells";
}
  
  
  //upgrades
  function buyup1() {
  up1=up1+1;
  if (spend==true) {
  gnrhlvl=gnrhlvl-up1cost
  }
  up1cost=up1cost*3;
  if (up1cost>10000) {
  if (up1==10) {
  document.getElementById("up1cost").innerHTML = "Cost: "+up1cost.toExponential(2)+" GnRH units and 1 estrogen unit";
  } else {
  document.getElementById("up1cost").innerHTML = "Cost: "+up1cost.toExponential(2)+" GnRH units";
  }} else {
  document.getElementById("up1cost").innerHTML = "Cost: "+up1cost+" GnRH units";
  }
  if (up1>31) {
  document.getElementById("up1cost").innerHTML = "Maximum upgrades bought!";
   document.getElementById("butup1").disabled = true
  }
  }
  
  function buyup2() {
  up2=up2+1;
  if (spend==true) {
  gnrhlvl=gnrhlvl-up2cost
  }
  up2cost=up2cost*20;
  document.getElementById("up2cost").innerHTML = "Cost: "+up2cost.toExponential(2)+" GnRH units";
   if (up2>9) {
  document.getElementById("up2cost").innerHTML = "Maximum upgrades bought!";
   document.getElementById("butup2").disabled = true
  }
  }
  
  function buyup3() {
  up3=true;
  if (spend==true) {
  lhlvl=lhlvl-up3cost;
  fshlvl0=fshlvl0-up3cost;
  }
     document.getElementById("leftdown").style.visibility= "visible";
document.getElementById("rightdown").style.visibility= "visible";
     document.getElementById("black").style.visibility= "visible";
     document.getElementById("estitself").style.visibility= "visible";
     document.getElementById("inhibinest").style.visibility= "visible";
     document.getElementById("upleft").style.visibility= "visible";
     document.getElementById("bigest").style.visibility= "visible";
     document.getElementById("inhibinfsh").style.visibility= "visible";
  document.getElementById("up3cost").innerHTML = "Bought!";
   document.getElementById("butup3").disabled = true
  }
  
  function buyup4() {
  document.getElementById("slidecontainer").style.visibility="visible";
  if (spend==true) {
  estlvl=estlvl-up4cost;
  }
  document.getElementById("up4cost").innerHTML = "Bought!";
   document.getElementById("butup4").disabled = true
  }
  
   function buyup4half() {
  spend=false;
  //estlvl=estlvl-up4halfcost;
  document.getElementById("up4halfcost").innerHTML = "Bought!";
   document.getElementById("butup4half").disabled = true
  }
  
  function buyup5() {
  up5=up5+1;
  if (spend==true) {
  lhlvl=lhlvl-up5cost;
  }
  up5cost=up5cost*3
  if (up5==2) {
   document.getElementById("up5cost").innerHTML = "Bought! (Limit of 2 purchases)";
   document.getElementById("butup5").disabled = true;
  } else {
  document.getElementById("up5cost").innerHTML = "Cost: "+up5cost.toExponential(2)+" LH units";
  }
  }
  
  function buyup5half() {
  estimprove=true;
  if (spend==true) {
  estlvl=estlvl-up5halfcost;
  }
  document.getElementById("up5halfcost").innerHTML = "Bought!";
   document.getElementById("butup5half").disabled = true
  }
  
   function buyup6() {
  up6=true;
  if (spend==true) {
  estlvl-=2*10**8;
  }
      document.getElementById("bigest").src= "biggreen.png";
   document.getElementById("up6cost").innerHTML = "Bought!";
   document.getElementById("butup6").disabled = true
  }
  
  function buyup7() {
  ovulation=true;
  slider.value=50;
  document.getElementById("slidecontainer").style.visibility="hidden";
  if (spend==true) {
  lhlvl=lhlvl-up7cost;
  }
    document.getElementById("glomerulosatext").innerHTML="Large luteal cells";
    document.getElementById("thecaltext").innerHTML="Small luteal cells";
  document.getElementById("up7cost").innerHTML = "Bought!";
   document.getElementById("butup7").disabled = true
  }
  
   function buyup8() {
  up8x+=1
  if (spend==true) {
  proglvl=proglvl-up8cost;
  }
      up8cost=up8cost*4.5
   if (up8x==3) {
   document.getElementById("up8cost").innerHTML = "Bought! (Limit of 3 purchases)";
   document.getElementById("butup8").disabled = true;
  } else {
   document.getElementById("up8cost").innerHTML = "Cost: "+up8cost.toExponential(2)+" progesterone units";
  }}
     
  function up8timer() {
   if (up8<up8x) {
    up8+=0.0005 
   }
  }
  
  function buyup9() {
  cycles+=1;
  cyclepoints+=1;
   document.getElementById("cyclesno").innerHTML = cycles
   document.getElementById("cyclepoints").innerHTML = cyclepoints
  gnrhlvl=0
estlvl=0
lhlvl=0
lhlvl2=0
fshlvl=0
fshlvl0=0
andlvl=0
inhibinlvl=0
proglvl=0
up1=2
up2=c1
up3=false
spend=true
up5=0
up6=false
up8=0
up8x=0
up1cost=400
up2cost = 10**5
up3cost = 2*10**6
up4cost = 3*10**6
up4halfcost=10**6
up5cost = 5*10**6
up5halfcost=10**7
up7cost=10**13
up8cost=(3*10**6)/(5**c5)
lhunlock = false
fshunlock = false
progunlock=false
estincrement=0
andincrement=0
estimprove = false
ovulation = false
lhlimit=false
slider.value=30
resettext()
resetgraph()
}

function resettext() {
document.getElementById("lh").innerHTML ="Unlocks at 4e+4 GnRH units"
document.getElementById("fsh").innerHTML ="Unlocks at 4e+4 GnRH units"
document.getElementById("androgen").innerHTML ="Produced by thecal cells"
document.getElementById("estrogen").innerHTML ="Produced by granulosa cells"
document.getElementById("inhibin").innerHTML ="Produced by granulosa cells"
document.getElementById("progesterone").innerHTML ="Produced by granulosa cells <br>Unlocks at 1.00e+10 LH units"
document.getElementById("up1cost").innerHTML ="Cost: 400 GnRH units"
document.getElementById("up2cost").innerHTML ="Cost: 1.00e+5 GnRH units"
document.getElementById("up3cost").innerHTML = "Cost: 2.00e+6 LH units and 2.00e+6 FSH units"
document.getElementById("up4cost").innerHTML ="Cost: 3.00e+6 estrogen units"
document.getElementById("up4halfcost").innerHTML ="Cost: 1.00e+6 estrogen units"
document.getElementById("up5cost").innerHTML ="Cost: 5.00e+6 LH units"
document.getElementById("up5halfcost").innerHTML ="Cost: 1.00e+7 estrogen units"
document.getElementById("up6cost").innerHTML ="Cost: 2.00e+8 estrogen units"
document.getElementById("up7cost").innerHTML ="Cost: 1.00e+13 LH units <i>(LH surge required)</i>"
if (c5>0) {
document.getElementById("up8cost").innerHTML ="Cost: 6.00e+5 progesterone units"
} else {
document.getElementById("up8cost").innerHTML ="Cost: 3.00e+6 progesterone units"
}
document.getElementById("sliderno").innerHTML ="70% thecal cells, 30% granulosa cells"
   document.getElementById("bigest").src= "bigred.png";
  document.getElementById("downfirst").style.visibility= "hidden";
  document.getElementById("leftdown").style.visibility= "hidden";
document.getElementById("rightdown").style.visibility= "hidden";
     document.getElementById("black").style.visibility= "hidden";
     document.getElementById("estitself").style.visibility= "hidden";
     document.getElementById("inhibinest").style.visibility= "hidden";
     document.getElementById("upleft").style.visibility= "hidden";
     document.getElementById("bigest").style.visibility= "hidden";
     document.getElementById("inhibinfsh").style.visibility= "hidden";
     document.getElementById("progarrow").style.visibility= "hidden";
  document.getElementById("glomerulosatext").innerHTML="Granulosa cells";
    document.getElementById("thecaltext").innerHTML="Thecal cells";
  document.getElementById("realgraph").style.visibility= "hidden";
}
  
function resetgraph() {
  linechart.data.labels=xvalues;
 linechart.data.datasets[0].data=[];
          linechart.data.datasets[1].data=[];
          linechart.data.datasets[2].data=[];
          linechart.data.datasets[3].data=[];
          tx=0
          linechart.update('none');
}
     
  //cycle upgrades
   function buyc1() {
  c1+=1
  up2+=1
  cyclepoints-=c1cost;
  c1cost=c1cost*2
  document.getElementById("cyclepoints").innerHTML =cyclepoints
  if (c1>1) {
  document.getElementById("c1cost").innerHTML = "Bought! (Limit of 2 purchases)"
  } else {
   document.getElementById("c1cost").innerHTML = "Cost: "+c1cost+" cycle points";
  }}
  
   function buyc2() {
  autobuy=true
  cyclepoints-=2;
  document.getElementById("cyclepoints").innerHTML =cyclepoints
  document.getElementById("c2cost").innerHTML = "Bought!"
   document.getElementById("butc2").disabled = true
  }
  
   function buyc3() {
  c3=true
  cyclepoints-=1;
  document.getElementById("cyclepoints").innerHTML =cyclepoints
  document.getElementById("c3cost").innerHTML = "Bought!"
   document.getElementById("butc3").disabled = true
  }
  
  function buyc4() {
  c4+=1
  cyclepoints-=1;
  document.getElementById("cyclepoints").innerHTML =cyclepoints
  document.getElementById("c4cost").innerHTML = "Bought!"
   document.getElementById("butc4").disabled = true
  }
  
   function buyc5() {
  c5+=1
  up8cost=up8cost/5
      if (up8x==3) {
   document.getElementById("up8cost").innerHTML = "Bought! (Limit of 3 purchases)";
   document.getElementById("butup8").disabled = true;
  } else {
   document.getElementById("up8cost").innerHTML = "Cost: "+up8cost.toExponential(2)+" progesterone units";
  }
  cyclepoints-=1;
  document.getElementById("cyclepoints").innerHTML =cyclepoints
  document.getElementById("c5cost").innerHTML = "Bought!"
   document.getElementById("butc5").disabled = true
  }
  
  //checking
  function checkbuybuttons() {
  if (gnrhlvl<up1cost || up1>31) {
  document.getElementById("butup1").disabled = true
  document.getElementById("upgrade1").style.borderColor="grey"
 } else {
 if (up1==10 && up3==false) {
 document.getElementById("butup1").disabled = true
   document.getElementById("upgrade1").style.borderColor="grey"
 } else {
  document.getElementById("butup1").disabled = false
   document.getElementById("upgrade1").style.borderColor="red"
  }}
  if (gnrhlvl<up2cost || up2>9) {
  document.getElementById("butup2").disabled = true
    document.getElementById("upgrade2").style.borderColor="grey"
 } else {
  document.getElementById("butup2").disabled = false
   document.getElementById("upgrade2").style.borderColor="red"
  }
   if (fshlvl<up3cost || lhlvl<up3cost || up3==true) {
  document.getElementById("butup3").disabled = true
     document.getElementById("upgrade3").style.borderColor="grey"
 } else {
  document.getElementById("butup3").disabled = false
   document.getElementById("upgrade3").style.borderColor="red"
  }
   if (estlvl<up4cost || document.getElementById("slidecontainer").style.visibility=="visible" || ovulation==true) {
  document.getElementById("butup4").disabled = true
     document.getElementById("upgrade4").style.borderColor="grey"
 } else {
  document.getElementById("butup4").disabled = false
   document.getElementById("upgrade4").style.borderColor="red"
  }
   if (estlvl<up4halfcost || spend==false) {
  document.getElementById("butup4half").disabled = true
     document.getElementById("upgrade4half").style.borderColor="grey"
 } else {
  document.getElementById("butup4half").disabled = false
   document.getElementById("upgrade4half").style.borderColor="red"
  }
   if (lhlvl<up5cost || up5==2) {
  document.getElementById("butup5").disabled = true
     document.getElementById("upgrade5").style.borderColor="grey"
 } else {
  document.getElementById("butup5").disabled = false
   document.getElementById("upgrade5").style.borderColor="red"
  }
  if (estlvl<up5halfcost || estimprove==true) {
  document.getElementById("butup5half").disabled = true
    document.getElementById("upgrade5half").style.borderColor="grey"
 } else {
  document.getElementById("butup5half").disabled = false
   document.getElementById("upgrade5half").style.borderColor="red"
  }
   if (estlvl<2*10**8 || up6==true) {
  document.getElementById("butup6").disabled = true
     document.getElementById("upgrade6").style.borderColor="grey"
 } else {
  document.getElementById("butup6").disabled = false
   document.getElementById("upgrade6").style.borderColor="red"
  }
   if (lhlvl<up7cost || ovulation==true) {
  document.getElementById("butup7").disabled = true
     document.getElementById("upgrade7").style.borderColor="grey"
 } else {
  document.getElementById("butup7").disabled = false
   document.getElementById("upgrade7").style.borderColor="red"
  }
   if (proglvl<up8cost || up8==3) {
  document.getElementById("butup8").disabled = true
     document.getElementById("upgrade8").style.borderColor="grey"
 } else {
  document.getElementById("butup8").disabled = false
   document.getElementById("upgrade8").style.borderColor="red"
  }
   if (proglvl>up9cost || lhlimit==false) {
  document.getElementById("butup9").disabled = true
     document.getElementById("upgrade9").style.borderColor="grey"
 } else {
  document.getElementById("butup9").disabled = false
   document.getElementById("upgrade9").style.borderColor="red"
   document.getElementById("realgraph").style.visibility= "visible";
  }
   if (cyclepoints<c1cost || c1>1) {
  document.getElementById("butc1").disabled = true
     document.getElementById("c1div").style.borderColor="grey"
 } else {
  document.getElementById("butc1").disabled = false
   document.getElementById("c1div").style.borderColor="red"
  }
  if (cyclepoints<2 || autobuy==true) {
  document.getElementById("butc2").disabled = true
    document.getElementById("c2div").style.borderColor="grey"
 } else {
  document.getElementById("butc2").disabled = false
   document.getElementById("c2div").style.borderColor="red"
  }
   if (cyclepoints<1 || c3==true) {
  document.getElementById("butc3").disabled = true
     document.getElementById("c3div").style.borderColor="grey"
 } else {
  document.getElementById("butc3").disabled = false
   document.getElementById("c3div").style.borderColor="red"
  }
   if (cyclepoints<1 || c4>0) {
  document.getElementById("butc4").disabled = true
     document.getElementById("c4div").style.borderColor="grey"
 } else {
  document.getElementById("butc4").disabled = false
   document.getElementById("c4div").style.borderColor="red"
  }
  if (cyclepoints<1 || c5>0) {
  document.getElementById("butc5").disabled = true
    document.getElementById("c5div").style.borderColor="grey"
 } else {
  document.getElementById("butc5").disabled = false
   document.getElementById("c5div").style.borderColor="red"
  }
  }
  
  function checkunlocks() {
  if (gnrhlvl>4*10**4) {
  lhunlock=true;
  fshunlock=true;
    document.getElementById("downfirst").style.visibility= "visible";
  }
  if (lhlvl>10**10) {
  progunlock=true;
    document.getElementById("progarrow").style.visibility="visible";
  }
  if (proglvl>10**8 && lhlvl2<10**4) {
  lhlimit=true
  }
  }
  
  function autobuyupgrades() {
  if (document.getElementById("butup1").disabled == false) {
  buyup1()
  }
  if (document.getElementById("butup2").disabled == false) {
  buyup2()
  }
  if (document.getElementById("butup3").disabled == false) {
  buyup3()
  }
  if (document.getElementById("butup4").disabled == false) {
  buyup4()
  }
  if (document.getElementById("butup4half").disabled == false) {
  buyup4half()
  }
  if (document.getElementById("butup5").disabled == false) {
  buyup5()
  }
  if (document.getElementById("butup5half").disabled == false) {
  buyup5half()
  }
  if (document.getElementById("butup6").disabled == false) {
  buyup6()
  }
  if (document.getElementById("butup7").disabled == false) {
  buyup7()
  }
  if (document.getElementById("butup8").disabled == false) {
  buyup8()
  }
  if (document.getElementById("butup9").disabled == false) {
  buyup9()
  }
  }
     
     const xvalues=[]
     for (var i = 1; i <= 100; i++) {
   xvalues.push("");
}
     var tx=0
    
     
     var linechart = new Chart("chart", {
  type: "line",
  data: {
    labels: xvalues,
    datasets: [{
      data: [],
      borderColor: "red",
      fill: false,
      pointRadius: 0,
      label: "LH"
    },{
      data: [],
      borderColor: "green",
      fill: false,
       pointRadius: 0,
      label: "FSH"
    },{
       data: [],
      borderColor: "purple",
      fill: false,
       pointRadius: 0,
      label: "Estrogen"
    },{
      data: [],
      borderColor: "blue",
      fill: false,
       pointRadius: 0,
      label: "Progesterone"
    }]
  },
  options: {
    animation: {
        duration: 0
    },
    scales: {
    y: {
     grid: {
                display:false
            },
    display: true,
      title: {
            display: true,
            text: "log10( hormone levels )"
          }
    },
    x: {
      grid: {
                display:false
            },
    display: true,
      title: {
            display: true,
            text: "Time"
          }
    }
  }     
  }
});
     
      setInterval(addvalues, 1000);
     
     function addvalues() {
        if (up3==true) {
          linechart.data.labels[tx]="";
          linechart.data.datasets[0].data[tx] =Math.log10(lhlvl2+1);
          linechart.data.datasets[1].data[tx] =Math.log10(fshlvl+1);
          linechart.data.datasets[2].data[tx] =Math.log10(estlvl/3.16+1);
          linechart.data.datasets[3].data[tx] =Math.log10(proglvl+1);
          tx+=1;
          linechart.stop();
         linechart.update('none');
     }}
     
     //alertbox stuff
     
     //fade after time
      function alertboxfade() {
  document.getElementById('alertbox').style.opacity=0;
   document.getElementById('exitpopupbut').style.cursor="default";
}

//appear
      function alertboxappear() {
  document.getElementById('alertbox').style.transition = "none";
  document.getElementById('alertbox').style.opacity=0.95;
  flushcss()
  document.getElementById('alertbox').style.transition = "";
   document.getElementById('exitpopupbut').style.cursor="pointer"
   setTimeout(alertboxfade,7000)
}

     //pressing x on popup
function exitpopup() {
   document.getElementById('alertbox').style.transition = "none";
     document.getElementById('alertbox').style.opacity = 0;
    flushcss();
    // restore animation
     document.getElementById('alertbox').style.transition = "";
     document.getElementById('exitpopupbut').style.cursor="default"
}

function flushcss() {
  document.getElementById('alertbox').offsetHeight= document.getElementById('alertbox').offsetHeight;
}
  

   </script>
   <style>
     
  #alertbox {
  background-color: lightblue;
  opacity: 95%;
  width: 250px;
  text-align: center;
  transition: opacity 3s;
  cursor: default;
  padding: 15px 15px 15px 15px;
}

#alertbox button {
     border-radius: 0px;
     border: none;
     background: transparent;
     font-size: 1em;
     color: black;
     position: absolute;
     left: 0;
     top: 0;
     padding-top: 0px;
     padding-left: 0px;
     cursor: pointer;
}
     
     
button {
  cursor: pointer;
     }
     
button:disabled,
button[disabled]{
  cursor: default;
     }
     
#hormones {
  width: 840px;
  float: left;
}

#upgrades {
  width: 410px;
  float: right;
  display: table;
 border-spacing: 2px;
}

#slider {
  display: inline;
  width: 300px;
}

#sliderno {
 position: relative;
 left: 30px;
}

#slidecontainer {
   width: 500px;
  position:absolute;
  top:375px;
  left:280px;
}

#upgrade1, #upgrade2, #upgrade3, #upgrade4, #upgrade4half, #upgrade5, #upgrade5half, #upgrade6, #upgrade7, #upgrade8, #upgrade9 {
  padding-left: 5px;
  border-style: solid;
  border-width: 2px;
  border-radius: 20px;
  border-color: grey;
  padding-right: 5px;
 
}


     #butup1, #butup2, #butup3, #butup4, #butup4half, #butup5, #butup5half, #butup6, #butup7, #butup8, #butup9, #butc1, #butc2, #butc3, #butc4, #butc5 {
  display: block;
  margin-left: auto;
  margin-right: auto;
  font-size: 12px;
  bottom: 0;
}
     
     
    #cycles {
        width: 410px;
  float: right;
  display: table;
 border-spacing: 2px;
     }
     
     #c1div, #c2div, #c3div, #c4div, #c5div {
  padding-left: 5px;
  border-style: solid;
  border-width: 2px;
  border-radius: 20px;
  border-color: grey;
  padding-right: 5px;
  padding-bottom: 5px;
  width: 200px; 
  display: table-cell;
}
     
   </style>
   
  </body>
</html>
